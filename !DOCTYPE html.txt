<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Live Weather Dashboard</title>
<style>
body, html {
  margin:0; padding:0; width:100%; height:100%;
  font-family:'Segoe UI', sans-serif;
  overflow:hidden;
  transition: background 2s;
  background: linear-gradient(to top, #87ceeb, #f0f8ff);
}
header{text-align:center; color:white; text-shadow:2px 2px 5px rgba(0,0,0,0.3);}
header h1{font-size:2.5rem;}
.container{text-align:center; margin:20px;}
input{padding:12px; width:250px; border-radius:12px; border:none; font-size:16px; outline:none;}
button{padding:12px 20px; border-radius:12px; border:none; background:rgba(255,255,255,0.15); color:#fff; font-size:16px; cursor:pointer; margin-left:10px; backdrop-filter:blur(8px);}
button:hover{transform:scale(1.05);}
#weatherResult{margin:20px auto; padding:20px; max-width:400px; background:rgba(255,255,255,0.15); border-radius:20px; backdrop-filter:blur(12px); color:#fff; display:none; text-align:center;}
/* SUN */
#sun{
  position:absolute;
  top:10%;
  left:50%;
  transform:translateX(-50%);
  width:120px;
  height:120px;
  background:yellow;
  border-radius:50%;
  box-shadow:0 0 20px 10px yellow;
  animation:pulse 2s infinite alternate;
  display:none;
  transition: all 2s ease;
}
@keyframes pulse{
  0%{box-shadow:0 0 20px 10px yellow;}
  50%{box-shadow:0 0 40px 20px yellow;}
  100%{box-shadow:0 0 20px 10px yellow;}
}
/* CLOUDS */
.cloud{position:absolute; top:10%; width:150px; height:80px; background:rgba(255,255,255,0.8); border-radius:50%; display:none;}
.cloud::after{content:""; position:absolute; width:100px; height:80px; background:rgba(255,255,255,0.8); border-radius:50%; left:30px; top:-20px;}
/* TREES */
.tree{position:absolute; bottom:10px; width:20px; height:60px; background:brown; border-radius:5px; display:none;}
.tree::after{content:""; position:absolute; bottom:40px; left:-15px; width:50px; height:50px; background:green; border-radius:50%;}
/* FIRE */
.fire { position:absolute; width:15px; height:30px; background: orange; border-radius:50% 50% 0 0; animation: flicker 0.3s infinite alternate; pointer-events:none; bottom:60px; }
@keyframes flicker{ 0%{transform:scaleY(1);} 50%{transform:scaleY(1.5) translateX(2px);} 100%{transform:scaleY(1) translateX(-2px);} }
/* SMOKE */
.smoke { position:absolute; width:10px; height:10px; background: rgba(200,200,200,0.5); border-radius:50%; animation: rise 2s linear infinite; bottom:90px; }
@keyframes rise{ 0%{transform:translateY(0) scale(1); opacity:0.7;} 100%{transform:translateY(-50px) scale(1.5); opacity:0;} }
/* BIRDS */
.bird{position:absolute; width:20px; height:10px; background:black; clip-path: polygon(0% 50%, 50% 0%, 100% 50%, 50% 100%); animation:fly 10s linear infinite; display:none;}
@keyframes fly{ 0%{transform:translate(-100px,50px) rotate(0deg);} 25%{transform:translate(300px,30px) rotate(10deg);} 50%{transform:translate(600px,80px) rotate(-10deg);} 75%{transform:translate(900px,40px) rotate(5deg);} 100%{transform:translate(1200px,60px) rotate(0deg);} }
/* RAIN */
.raindrop{ position:absolute; width:2px; height:15px; background: rgba(173,216,230,0.7); animation:fall linear infinite; }
@keyframes fall{ 0%{transform:translateY(-20px);} 100%{transform:translateY(100vh);} }
/* WATER LAYER */
#waterLayer{position:absolute; bottom:0; left:0; width:100%; height:0; background: rgba(0,119,190,0.5); transition: height 5s ease-in-out; overflow:hidden; z-index:2;}
/* FISH */
.fish{position:absolute; width:30px; height:15px; background:orange; border-radius:50%;}
/* BUBBLES */
.bubble{position:absolute; bottom:0; width:8px; height:8px; background: rgba(255,255,255,0.7); border-radius:50%; opacity:0.8; animation:rise 4s linear infinite;}
@keyframes rise{0%{transform:translateY(0) scale(1);} 50%{opacity:0.5;} 100%{transform:translateY(-150px) scale(1.5); opacity:0;}}
#waterLayer::after{content:""; position:absolute; top:0; left:0; width:100%; height:100%; background: rgba(255,255,255,0.05); pointer-events:none; animation: ripple 5s infinite linear;}
@keyframes ripple{0%{background-position:0 0;} 100%{background-position:100px 100px;}}
</style>
</head>
<body>
<header>
  <h1>Live Weather Dashboard</h1>
  <p>Enter a Tamil Nadu district to check the weather</p>
</header>
<div class="container">
  <input type="text" id="cityInput" placeholder="e.g. Chennai">
  <button id="getWeatherBtn">Get Weather</button>
</div>
<div id="weatherResult"></div>

<!-- Visual Elements -->
<div id="sun"></div>
<div class="cloud" style="top:20%; left:0;"></div>
<div class="cloud" style="top:30%; left:200px;"></div>
<div class="cloud" style="top:40%; left:400px;"></div>
<div class="tree" style="left:50px;"></div>
<div class="tree" style="left:150px;"></div>
<div class="tree" style="left:250px;"></div>
<div class="bird" style="top:20%; left:-100px;"></div>
<div class="bird" style="top:35%; left:-150px;"></div>
<div class="bird" style="top:50%; left:-200px;"></div>
<div id="rainContainer"></div>
<div id="waterLayer"></div>

<script>
const cityInput=document.getElementById("cityInput");
const getBtn=document.getElementById("getWeatherBtn");
const resultBox=document.getElementById("weatherResult");
const sun=document.getElementById("sun");
const clouds=document.querySelectorAll(".cloud");
const trees=document.querySelectorAll(".tree");
const birds=document.querySelectorAll(".bird");
const rainContainer=document.getElementById("rainContainer");
const waterLayer=document.getElementById("waterLayer");

getBtn.addEventListener("click",()=>triggerWeather());
cityInput.addEventListener("keydown", e=>{
  if(e.key==="Enter"){e.preventDefault(); triggerWeather();}
});

function createRain(num){
  rainContainer.innerHTML="";
  for(let i=0;i<num;i++){
    const d=document.createElement("div");
    d.classList.add("raindrop");
    d.style.left=Math.random()*100+"vw";
    d.style.animationDuration=(0.5+Math.random()*0.5)+"s";
    d.style.animationDelay=Math.random()*2+"s";
    rainContainer.appendChild(d);
  }
}

function createFish(num){
  waterLayer.innerHTML="";
  for(let i=0;i<num;i++){
    const f=document.createElement("div");
    f.classList.add("fish");
    f.style.top=(20+Math.random()*60)+"%";
    f.style.left=Math.random()*window.innerWidth+"px";
    f.dataset.speed=(1+Math.random()*2);
    waterLayer.appendChild(f);
  }
}

function animateFish(){
  const fishes=document.querySelectorAll(".fish");
  fishes.forEach(f=>{
    let x=parseFloat(f.style.left);
    let y=parseFloat(f.style.top);
    let s=parseFloat(f.dataset.speed);
    x+=s;
    if(x>window.innerWidth){x=-50; y=20+Math.random()*60;}
    f.style.left=x+"px";
    f.style.top=y+"%";
  });
  requestAnimationFrame(animateFish);
}

function createBubbles(num){
  for(let i=0;i<num;i++){
    const b=document.createElement("div");
    b.classList.add("bubble");
    b.style.left=Math.random()*100+"%";
    b.style.animationDuration=(3+Math.random()*2)+"s";
    b.style.width=(4+Math.random()*8)+"px";
    b.style.height=b.style.width;
    waterLayer.appendChild(b);
  }
}

function triggerWeather(){
  const city=cityInput.value.trim();
  if(!city){alert("Enter a district"); return;}
  const temp=Math.floor(Math.random()*(40-18)+18); // Random 18~40

  resultBox.style.display="block";
  resultBox.innerHTML=`<h2>${city}</h2><p>üå°Ô∏è Temperature: ${temp}¬∞C</p>`;

  // Reset visuals
  sun.style.display="none";
  clouds.forEach(c=>c.style.display="none");
  trees.forEach(t=>{
    t.style.display="none";
    t.innerHTML=""; // clear fire/smoke
  });
  birds.forEach(b=>b.style.display="none");
  rainContainer.innerHTML="";
  waterLayer.innerHTML="";
  waterLayer.style.height="0";
  document.body.style.background="linear-gradient(to top, #87ceeb, #f0f8ff)";
 
  // Reset sun position
  sun.style.left="50%";
  sun.style.transform="translateX(-50%)";

  if(temp>30){ // HOT (SUNNY)
    resultBox.innerHTML+=`<p>üî• Hot / Sunny</p>`;
    sun.style.display="block";

    /* ‚òÄÔ∏è Move sun to left side */
    sun.style.left="10%";
    sun.style.transform="translateX(0)";
   
    trees.forEach(t=>{
      t.style.display="block";
      for(let i=0;i<3;i++){
        const fire=document.createElement("div");
        fire.classList.add("fire");
        fire.style.left=(Math.random()*10-5)+"px";
        t.appendChild(fire);
        const smoke=document.createElement("div");
        smoke.classList.add("smoke");
        smoke.style.left=(Math.random()*20-10)+"px";
        t.appendChild(smoke);
      }
    });
    birds.forEach(b=>b.style.display="block");
    document.body.style.background="linear-gradient(to top, #FFD700, #FFA500)";
  }
  else if(temp<25){ // RAIN
    resultBox.innerHTML+=`<p>üåßÔ∏è Rainy / Cold</p>`;
    createRain(150);
    createFish(10);
    setTimeout(()=>{
      waterLayer.style.height="70%";
      createBubbles(25);
    },1000);
    animateFish();
    document.body.style.background="linear-gradient(to top, #4facfe, #00f2fe)";
  }
  else { // CLOUDY
    resultBox.innerHTML+=`<p>‚òÅÔ∏è Cloudy / Mild</p>`;
    clouds.forEach(c=>c.style.display="block");
    document.body.style.background="linear-gradient(to top, #b0c4de, #d3d3d3)";
  }
}
</script>
</body>
</html>
